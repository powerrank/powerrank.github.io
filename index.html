<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Power Rank Calculator</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            padding-top: 100px;
            padding-bottom: 100px; /* Increased bottom padding */
            background-color: #f9f9f9; /* Light background for contrast */
            display: flex;
            flex-direction: column; /* Stack elements vertically */
            justify-content: center; /* Center horizontally */
            align-items: flex-start; /* Align to left */
            height: 100vh; /* Full viewport height */
            position: relative; /* To position floating container */
            overflow: auto; /* Allow scrolling */
        }
        h1 {
            text-align: center; /* Align title to the center */
            color: #333;
            margin-bottom: 20px; /* Space between title and input fields */
        }
        .input-container {
            display: flex;
            flex-direction: column; /* Stack input fields vertically */
            width: 100%; /* Full width for responsive design */
            max-width: 250px; /* Limit max width for better appearance */
            margin-left: 25%; /* Align to the left */
        }
        .input-field {
            margin: 5px 0; /* Vertical margin for spacing */
            padding: 10px; /* Reduced padding for smaller input fields */
            width: 100px; /* Fixed width for input fields */
            border: 2px solid #ccc;
            border-radius: 5px; /* Slightly smaller border radius */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: border-color 0.3s, box-shadow 0.3s;
            font-size: 16px; /* Set font size to 16px or larger */
            touch-action: manipulation; /* Prevents zooming on touch */
        }
        .input-field:focus {
            border-color: #007BFF; /* Change border color on focus */
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
            outline: none; /* Remove default outline */
        }
        label {
            margin-bottom: 5px;
            display: block;
            color: #555;
        }
        .input-wrapper {
            display: flex; /* Use flexbox for alignment */
            align-items: center; /* Align items vertically centered */
            margin-bottom: 10px; /* Space between input fields */
        }
        .points {
            margin-left: 10px; /* Space between input and points */
            font-weight: bold;
            color: #007BFF; /* Color for points display */
        }
        .percentage {
            margin-left: 5px; /* Space between input and percentage symbol */
            font-weight: bold; /* Bold style for emphasis */
            color: #333; /* Same color as the title */
        }
        .recommendation {
            margin-left: 10px; /* Space between input and recommendation */
            font-weight: bold;
            color: #FF5733; /* Color for recommendations */
        }
        .floating-container {
            position: fixed; /* Fix position at the bottom */
            top: 0; /* Align to bottom */
            left: 0;
            right: 0; /* Full width */
            background-color: #007BFF; /* Background color */
            color: white; /* Text color */
            padding: 5px; /* Padding for spacing */
            text-align: center; /* Center the text */
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.2); /* Shadow for depth */
            z-index: 1; /* Ensure it's on top of other elements */
        }
        .result {
            font-size: 24px;
            font-weight: bold;
            margin-top: 20px;
            color: #333;
        }
    </style>
</head>
<body>
    <h1>Power Rank Calculator</h1>
    <div class="input-container">
        <label for="opps-goal">Opps Goal:</label>
        <div class="input-wrapper">
            <input type="tel" id="opps-goal" class="input-field" oninput="updatePowerRank()" min="1" max="100">
            <span class="percentage">%</span>
            <span id="opps-goal-points" class="points">0 Points</span>
            <span id="opps-goal-recommendation" class="recommendation"></span>
        </div>

        <label for="ppvga-goal">PPVGA Goal:</label>
        <div class="input-wrapper">
            <input type="tel" id="ppvga-goal" class="input-field" oninput="updatePowerRank()" min="1" max="100">
            <span class="percentage">%</span>
            <span id="ppvga-goal-points" class="points">0 Points</span>
            <span id="ppvga-goal-recommendation" class="recommendation"></span>
        </div>

        <label for="ppvga-cr">PPVGA CR:</label>
        <div class="input-wrapper">
            <input type="tel" id="ppvga-cr" class="input-field" oninput="updatePowerRank()" pattern="[0-9]*" title="Please enter a valid number" inputmode="decimal" />
            <span class="percentage">%</span>
            <span id="ppvga-cr-points" class="points">0 Points</span>
            <span id="ppvga-cr-recommendation" class="recommendation"></span>
        </div>

        <label for="bb-goal">BB Goal:</label>
        <div class="input-wrapper">
            <input type="tel" id="bb-goal" class="input-field" oninput="updatePowerRank()" min="1" max="100">
            <span class="percentage">%</span>
            <span id="bb-goal-points" class="points">0 Points</span>
            <span id="bb-goal-recommendation" class="recommendation"></span>
        </div>

        <label for="cru-goal">CRU Goal:</label>
        <div class="input-wrapper">
            <input type="tel" id="cru-goal" class="input-field" oninput="updatePowerRank()" min="1" max="100">
            <span class="percentage">%</span>
            <span id="cru-goal-points" class="points">0 Points</span>
            <span id="cru-goal-recommendation" class="recommendation"></span>
        </div>

        <label for="sales-alerts">Sales Alerts:</label>
        <div class="input-wrapper">
            <input type="tel" id="sales-alerts" class="input-field" oninput="updatePowerRank()" min="1" max="100">
            <span id="sales-alerts-points" class="points">0 Points</span>
            <span id="sales-alerts-recommendation" class="recommendation"></span>
        </div>

        <label for="portal-boxes">Portal Boxes:</label>
        <div class="input-wrapper">
            <input type="tel" id="portal-boxes" class="input-field" oninput="updatePowerRank()" min="1" max="100">
            <span id="portal-boxes-points" class="points">0 Points</span>
            <span id="portal-boxes-recommendation" class="recommendation"></span>
        </div>

        <label for="staffing-deficit">Staffing Deficit:</label>
        <div class="input-wrapper">
            <input type="number" id="staffing-deficit" class="input-field" oninput="updatePowerRank()" min="1" max="100">
            <span id="staffing-deficit-points" class="points">0 Points</span>
            <span id="staffing-deficit-recommendation" class="recommendation"></span>
        </div>
    </div>
    <div class="floating-container">
        <h2 id="power-rank">Power Rank: 0</h2>
        <p id="points-needed">Points needed for next power rank: 0</p>
    </div>

    <script>
        function getRegScalePoint(number) {
            if (number >= 0 && number <= 54) return 0;
            if (number >= 55 && number <= 59) return 1;
            if (number >= 60 && number <= 64) return 2;
            if (number >= 65 && number <= 69) return 3;
            if (number >= 70 && number <= 74) return 4;
            if (number >= 75 && number <= 79) return 5;
            if (number >= 80 && number <= 84) return 6;
            if (number >= 85 && number <= 89) return 7;
            if (number >= 90 && number <= 94) return 8;
            if (number >= 95 && number <= 99) return 9;
            if (number >= 100) return 10;
            return 0; // Return 0 for invalid input
        }
    
        function getCloseRateScalePoint(number) {
            if (number < 4) return 0;
            if (number >= 4 && number < 5) return 8;
            if (number >= 5) return 10;
            return 0; // Return 0 for invalid input
        }
    
        function getSalesAlertScalePoint(number) {
            if (number > 5) return 0;
            if (number >= 4) return 6;
            if (number >= 2) return 8;
            if (number >= 0) return 10;
            return 0; // Return 0 for invalid input
        }
    
        function getPortalBoxesScalePoint(number) {
            if (number < 2) return 0;
            if (number >= 2 && number < 4) return 6;
            if (number >= 4 && number < 5) return 8;
            if (number >= 5 && number < 6) return 9;
            if (number >= 6) return 10;
            return 0; // Return 0 for invalid input
        }
    
        function getStaffDeficitScalePoint(number) {
            if (number < -2) return 0;
            if (number === -2) return 5;
            if (number === -1) return 8;
            if (number >= 0) return 10;
            return 0; // Return 0 for invalid input
        }
    
        function getPointsNeededForNextPowerRank(totalPoints) {
            // Determine the next power rank threshold based on the specified ranges
            if (totalPoints >= 4 && totalPoints <= 11) return 12 - totalPoints; // Power Rank 1
            if (totalPoints >= 12 && totalPoints <= 19) return 20 - totalPoints; // Power Rank 2
            if (totalPoints >= 20 && totalPoints <= 27) return 28 - totalPoints; // Power Rank 3
            if (totalPoints >= 28 && totalPoints <= 35) return 36 - totalPoints; // Power Rank 4
            if (totalPoints >= 36 && totalPoints <= 43) return 44 - totalPoints; // Power Rank 5
            if (totalPoints >= 44 && totalPoints <= 51) return 52 - totalPoints; // Power Rank 6
            if (totalPoints >= 52 && totalPoints <= 59) return 60 - totalPoints; // Power Rank 7
            if (totalPoints >= 60 && totalPoints <= 67) return 68 - totalPoints; // Power Rank 8
            if (totalPoints >= 68 && totalPoints <= 75) return 76 - totalPoints; // Power Rank 9
            if (totalPoints >= 76 && totalPoints <= 80) return 81 - totalPoints; // Power Rank 10
            return 0; // If totalPoints is above 80, no points needed
        }
    
        function updatePowerRank() {
            var oppsGoal = parseFloat($('#opps-goal').val()) || 0; // Default to 0 if empty
            var ppvgaGoal = parseFloat($('#ppvga-goal').val()) || 0;
            var ppvgaCr = parseFloat($('#ppvga-cr').val()) || 0;
            var bbGoal = parseFloat($('#bb-goal').val()) || 0;
            var cruGoal = parseFloat($('#cru-goal').val()) || 0;
            var salesAlerts = parseFloat($('#sales-alerts').val()) || 0;
            var portalBoxes = parseFloat($('#portal-boxes').val()) || 0;
            var staffingDeficit = parseFloat($('#staffing-deficit').val()) || 0;
    
            // Calculate points for each input
            var oppsPoints = getRegScalePoint(oppsGoal);
            var ppvgaPoints = getRegScalePoint(ppvgaGoal);
            var ppvgaCrPoints = getCloseRateScalePoint(ppvgaCr);
            var bbPoints = getRegScalePoint(bbGoal);
            var cruPoints = getRegScalePoint(cruGoal);
            var salesPoints = getSalesAlertScalePoint(salesAlerts);
            var portalPoints = getPortalBoxesScalePoint(portalBoxes);
 var staffingDeficitPoints = getStaffDeficitScalePoint(staffingDeficit);
    
            // Display points contributed by each metric
            $('#opps-goal-points').text(oppsPoints + ' Points');
            $('#ppvga-goal-points').text(ppvgaPoints + ' Points');
            $('#ppvga-cr-points').text(ppvgaCrPoints + ' Points');
            $('#bb-goal-points').text(bbPoints + ' Points');
            $('#cru-goal-points').text(cruPoints + ' Points');
            $('#sales-alerts-points').text(salesPoints + ' Points');
            $('#portal-boxes-points').text(portalPoints + ' Points');
            $('#staffing-deficit-points').text(staffingDeficitPoints + ' Points');
    
            // Calculate total points
            var totalPoints = oppsPoints + ppvgaPoints + ppvgaCrPoints + bbPoints + cruPoints + salesPoints + portalPoints + staffingDeficitPoints;
    
            // Calculate current power rank based on average points
            var powerRank = Math.round(totalPoints / 8);
            $('#power-rank').text('Power Rank: ' + powerRank);
    
            // Calculate points needed for next power rank
            var pointsNeededForNextPowerRank = getPointsNeededForNextPowerRank(totalPoints);
            $('#points-needed').text('Points needed for next power rank: ' + pointsNeededForNextPowerRank);

            $('.floating-container').css('background-color', getColor(powerRank));
        }
    
        function getColor(powerRank) {
            switch (true) {
                case (powerRank <= 2):
                    return '#FF3F3F';
                case (powerRank == 3):
                    return '#F65448';
                case (powerRank == 4):
                    return '#F7665B';
                case (powerRank == 5):
                    return '#F8766C';
                case (powerRank == 6):
                    return '#F6A382';
                case (powerRank == 7):
                    return '#FCECA6';
                case (powerRank == 8):
                    return '#B6E8C0';
                case (powerRank == 9):
                    return '#8BD99A';
                case (powerRank == 10):
                    return '#53C587';
                default:
                    return '#007BFF'; // Default color
            }
        }

        $(document).ready(function() {
            updatePowerRank();
            $('#opps-goal, #ppvga-goal, #ppvga-cr, #bb-goal, #cru-goal, #sales-alerts, #portal-boxes, #staffing-deficit').on('input', updatePowerRank);
        });
    </script>
</body>
</html>
